{% extends 'base.html' %}
{% block head %}

<style>
    .EasyMDEContainer .CodeMirror {
        border: 1px solid #ddd;
        border-radius: 4px;
    }
</style>

{% endblock %}
{% block content %}
<form method="POST" enctype="multipart/form-data">
    {{ form.hidden_tag() }}
    {{ form.title.label }} {{ form.title() }}

    <div class="mt-3">
        {{ form.content.label }}
        {{ form.content(id="a") }}
    </div>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/easymde/dist/easymde.min.css"
    />
    <script src="https://cdn.jsdelivr.net/npm/easymde/dist/easymde.min.js"></script>

    <form method="post" enctype="multipart/form-data">
  <input type="file" name="files" multiple>
    </form>
    </textarea>
    {{ form.files.label }} {{ form.files(multiple="multiple") }}
    {{ form.category.label }} {{ form.category() }}<br>  <!-- 新增分类选择 -->
        {{ form.submit() }}
    <script>
        const easyMDE = new EasyMDE({
            element: document.getElementById('a'),
            spellChecker: false,
            autoDownloadFontAwesome: false,
            uploadImage: true,
            imageUploadEndpoint: "{{ url_for('upload_image') }}",
            previewClass: ["markdown-body", "p-3"]
        });


    </script>

</form>
{% endblock %}